<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_mrp_workforce_tree" model="ir.ui.view">
            <field name="name">view.mrp.workforce.tree</field>
            <field name="model">mrp.workforce</field>
            <field eval="100" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Vista de lista mano de obra" create="true" edit="true" import="true">
                    <field name="create_date" string="Creado el" />
                    <field name="name" string="Referencia"/>
                    <field name="employee_id" />
                    <field name="date_report"/>
                    <field name="turn_report" />
                    <field name="hours_report" />
                    <field name="cost_report" />
                </tree>
            </field>
        </record>

        <record id="view_mrp_workforce_form" model="ir.ui.view">
            <field name="name">view.mrp.workforce.form</field>
            <field name="model">mrp.workforce</field>
            <field name="arch" type="xml">
                <form string="Vista de formulario mano de obra" create="true" edit="true">
                    <sheet>
                        <group>
                            <!--IZQUIERDA-->
                            <group >
                                <field name="reference" />
                                <field name="justification" />
                                <field name="employee_id" domain="[('department_id', 'ilike', 'Produc')]"/>
                                <field name="type_justifica" attrs="{'invisible': ['|',['employee_id','=',False],['justification','!=',True]],'required': [['employee_id','!=',False],['justification','=',True]]}"/>
                                <field name="maintenance_request_id" attrs="{'invisible':[['type_justifica','!=','Mantenimiento maquina']]}"/>
                                <field name="maintenance_equipment_id" attrs="{'invisible':[['type_justifica','!=','Mantenimiento maquina']]}"/>
                                <field name="turn_justification" attrs="{'invisible':[['justification','=',False]],'required':[['justification','!=',False]]}" />
                                <field name="date_justification" attrs="{'invisible':[['justification','=',False]],'required':[['justification','!=',False]]}"  />                                
                                <field name="production_id" attrs="{'invisible': [['production_id','=',False]]}"/> <!---->
                                <field name="date_production"  attrs="{'invisible': [['production_id','=',False]]}"/>
                                <field name="turn_production" attrs="{'invisible': [['production_id','=',False]]}"/>
                                <field name="qty_production" invisible="1"/>
                                <field name="hours_report" attrs="{'invisible':[['justification','=',False],['production_id','=',False]]}"/>
                                <field name="name" invisible="1"/>
                                
                            </group>
                                
                            <group >
                                <field name="job_employ" />
                                <field name="currency_id" invisible="1"/>
                                <field name="salary" />
                                <field name="hour_salary" />
                                <field name="turn_report" invisible="1" />
                                <field name="cost_report" invisible="1" />
                            </group>
                            <!--DERECHA-->
                            <group >
                                <field name="create_uid" string="Creado por"/>
                                <field name="create_date" string="Creado el"/>
                                <field name="company_id" invisible="1" />
                                <field name="write_uid" string="Actualizado por" />
                                <field name="write_date" string="Actualizado el"/>
                            </group>
                            <group >
                                
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--VISTA DE BUSQUEDA-->
        <record id="view_mrp_workforce_search" model="ir.ui.view">
            <field name="name">view.mrp.workforce.search</field>
            <field name="model">mrp.workforce</field>
            <field name="arch" type="xml">
                <search string="Busqueda por codigo">
                    <field name="production_id" string="Por referencia" />
                    <field name="employee_id" string="Empleado" />
                    <field name="type_justifica" string="Tipo de justificacion"/>
                    <field name="turn_report" string="Turno reportado" />
                    <separator/>
                    <filter name="filter_today" string="Hoy" domain="[('create_date', '=', context_today().strftime('%Y-%m-%d'))]"/>
                    <separator/>
                    <group name="group_by_mrp_workforce" string="Group by">
                        <filter name="group_by_date" string="Por Fecha" context="{'group_by': 'create_date'}" />
                        <separator/>
                        <filter name="group_by_turn_report" string="Turno reportado" context="{'group_by': 'turn_report'}" />
                        <filter name="group_by_product_mo" string="Empleado" context="{'group_by': 'employee_id'}" />
                        <filter name="group_by_name_mo" string="Por referencia" context="{'group_by': 'name'}" />
                        <filter name="group_by_type_just" string="Tipo de justificacion" context="{'group_by': 'type_justifica'}" />
                    </group>                    
                </search>
            </field>
        </record>
        <!--VISTA DE CALENDARIO-->
        <record id="view_mrp_workforce_calendar" model="ir.ui.view">
            <field name="name">view.mrp.workforce.calendar</field>
            <field name="model">mrp.workforce</field>
            <field name="arch" type="xml">
                <calendar string="Calendario mano de obra" date_start="date_report" color="employee_id" mode="month">
                    <field name="name" string="Referencia"/>
                    <field name="employee_id"/>
                    <field name="turn_report" />
                    <field name="hours_report" />
                    <field name="cost_report" />
                </calendar> 
            </field>
        </record>

        <!--Vista de Pivote-->
        <record id="view_mrp_workforce_pivot" model="ir.ui.view">
            <field name="name">view.mrp.workforce.pivot</field>
            <field name="model">mrp.workforce</field>
            <field name="arch" type="xml">
                <pivot string="Pivote mano de obra" disable_linking="true">
                    <field name="production_id" type="row"/>
                    <field name="cost_report" type="sum"/>
                </pivot> 
            </field>
        </record>


        <!--VISTA DE GRAFICO-->
        <record id="view_mrp_workforce_graph" model="ir.ui.view">
            <field name="name">view.mrp.workforce.graph</field>
            <field name="model">mrp.workforce</field>
            <field name="arch" type="xml">
                <graph string="Grafico mano de obra" type="bar">
                    <field name="employee_id" />
                    <field name="hours_report" type="measure" />
                    <field name="justification" />
                </graph>
            </field>
        </record>

        <record id="action_mrp_workforce" model="ir.actions.act_window">
            <field name="name">Mano de obra</field>
            <field name="res_model">mrp.workforce</field>
            <field name="view_mode">tree,form,calendar,graph,pivot</field>
            <field name="view_id" ref="view_mrp_workforce_tree"/>
            <field name="search_view_id" ref="view_mrp_workforce_search"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Mano de obra
                </p>
            </field>
        </record>
        <!--menu item-->
        <menuitem name="Mano de obra"
            id="menu_root_mrp_workforce"
            web_icon="mrp_workforce,static/description/icon.png"
            sequence="12"/>
        <menuitem
            id="submenu_mrp_workforce"
            name="Registros de Mano de obra"
            parent="menu_root_mrp_workforce"
            action="action_mrp_workforce"
            sequence="2"/>
    </data>
</odoo>