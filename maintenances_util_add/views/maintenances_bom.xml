<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_maintenance_bom_tree" model="ir.ui.view">
            <field name="name">view.maintenace.bom.tree</field>
            <field name="model">maintenances.bom</field>
            <field eval="100" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Repuestos en maquinas" create="true" edit="false" import="true" export_xlsx="0">
                    <field name="equip_maintenance_id" string="Maquina"/>
                    <field name="company_id" invisible="1"/>
                    <field name="product_id" string="Componentes"/>
                    <field name="product_tmpl_id" invisible="1"/>
                    <field name="details" />
                    <field name="cost_component" />
                    <field name="product_qty" />
                    <field name="product_uom_category_id" invisible="1"/>
                    <field name="product_uom_id" string="Unidad de medida" options="{'no_open':True,'no_create':True}" />
                    <field name="cost_component" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                    <field name="cost_qty" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="maintenance_menor" />
                    <field name="maintenance_mayor" />
                    <field name="maintenance_ct" />
                </tree>
            </field>
        </record>

        <record id="view_maintenance_bom_search" model="ir.ui.view">
            <field name="name">view.maintenance.bom.search</field>
            <field name="model">maintenances.bom</field>
            <field name="arch" type="xml">
                <search string="Busqueda kardex stock">
                    <field name="equip_maintenance_id" string="Maquina" /> 
                    <field name="product_id" string="Componente"/>                  
                    <separator/>
                    <filter name="filter_state1" string="Preventivo menor" domain="[('maintenance_menor', '=', 'true')]" context="{}" />
                    <filter name="filter_state2" string="Preventivo mayor" domain="[('maintenance_mayor', '=', 'true')]" context="{}" />
                    <filter name="filter_state3" string="Correctivo" domain="[('maintenance_ct', '=', 'true')]" context="{}" /> 
                    <separator/>
                    <group name="group_by_custom_modules" string="Group by">
                        <filter name="group_by_date" string="Por Fecha" context="{'group_by': 'create_date'}" />
                        <filter name="group_by_equip" string="Por Maquina" context="{'group_by': 'equip_maintenance_id'}" />
                    </group>
                </search>
            </field>
        </record>

        <record id="action_maintenance_bom" model="ir.actions.act_window">
            <field name="name">Lista de repuestos en maquinas</field>
            <field name="res_model">maintenances.bom</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_maintenance_bom_tree"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Repuestos en maquinas
                </p>
            </field>
        </record>
        <menuitem id="menu_action_maintenance_bom" 
                    name="Repuestos en maquinas"
                    action="action_maintenance_bom"
                    parent="maintenance.menu_maintenance_configuration" 
                    sequence="15"/>
    </data>
</odoo>